# CrossPoster - Платформа кросспостинга

CrossPoster - это приложение для автоматического кросспостинга между различными социальными сетями. Приложение позволяет публиковать посты одновременно в нескольких социальных сетях: ВКонтакте, Telegram, Instagram, Pinterest, YouTube.

## Особенности

- Веб-интерфейс для управления аккаунтами
- Безопасное хранение API-ключей (шифрование)
- Тестовая отправка постов
- Мониторинг статистики
- Поддержка多种 социальных сетей
- Автоматическая синхронизация постов между платформами

## Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone https://github.com/ваш-аккаунт/crossposter.git
cd crossposter
```

2. Создайте файл `.env` на основе `.env.example`:
```bash
cp .env.example .env
```

3. Запустите приложение с помощью Docker Compose:
```bash
docker-compose up -d
```

Приложение будет доступно по адресу `http://localhost:8000`

## Безопасное хранение API-ключей

CrossPoster использует шифрование для безопасного хранения API-ключей:
- Все токены шифруются с использованием Fernet (AES 128)
- Токены автоматически расшифровываются при использовании
- Веб-интерфейс позволяет безопасно вводить токены без риска их утечки

## Тестирование репоста

Для проверки работы приложения вы можете использовать тестовую функцию:
1. Перейдите в раздел "Аккаунты"
2. Подключите хотя бы один аккаунт
3. Перейдите на главную страницу
4. Используйте форму "Тестовый репост" для отправки тестового поста во все подключенные социальные сети


Приложение для автоматического кросспостинга в социальные сети:
- ВКонтакте
- Telegram
- Instagram
- Pinterest
- YouTube Shorts

## Основные функции:
- Мониторинг новых публикаций в социальных сетях
- Автоматический репост во все остальные сети
- Веб-интерфейс админ-панели для управления
- Статистика постинга

## Требования

- Python 3.9+
- Docker и Docker Compose (опционально)
- PostgreSQL (локально или в Docker)
- Redis (локально или в Docker)

## Установка и запуск

### Локальный запуск

1. Клонируйте репозиторий:
```bash
git clone https://github.com/nettramp/CrossPoster.git
cd CrossPoster
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Создайте файл `.env` на основе `.env.example` и укажите свои API-ключи:
```bash
cp .env.example .env
# Отредактируйте .env файл и добавьте свои API-ключи
```

4. Запустите миграции базы данных:
```bash
alembic upgrade head
```

5. Запустите приложение:
```bash
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

### Запуск с помощью Docker Compose

1. Клонируйте репозиторий:
```bash
git clone https://github.com/nettramp/CrossPoster.git
cd CrossPoster
```

2. Создайте файл `.env` на основе `.env.example` и укажите свои API-ключи:
```bash
cp .env.example .env
# Отредактируйте .env файл и добавьте свои API-ключи
```

3. Запустите приложение:
```bash
docker-compose up -d
```

Приложение будет доступно по адресу `http://localhost:8000`

## Безопасность

- Все API-ключи и секреты должны быть указаны в файле `.env`
- Не храните чувствительные данные в коде
- Файл `.env` добавлен в `.gitignore` и не должен попадать в репозиторий

## Технологии:
- Python 3.9+
- FastAPI для веб-интерфейса
- Celery для асинхронной обработки задач
- Redis как брокер сообщений
- PostgreSQL для хранения данных
- Docker & Docker Compose для контейнеризации

## Архитектура

Проект разделен на следующие основные компоненты:

- `app/main.py` - основное приложение FastAPI
- `app/api/` - API эндпоинты
- `app/social/` - клиенты для работы с социальными сетями
- `app/models/` - модели базы данных
- `app/schemas/` - схемы Pydantic для валидации
- `app/tasks/` - асинхронные задачи Celery
- `app/scheduler.py` - планировщик задач
- `app/worker.py` - воркер Celery

## API

После запуска приложения документация к API будет доступна по адресу:
- `http://localhost:8000/docs` - интерактивная документация (Swagger UI)
- `http://localhost:8000/redoc` - документация (ReDoc)
- `http://localhost:8000/openapi.json` - спецификация OpenAPI

## Настройка социальных сетей

Для работы с каждой социальной сетью необходимо получить соответствующие API-ключи:

### ВКонтакте
- Создайте standalone-приложение
- Получите токен доступа с необходимыми правами

### Telegram
- Создайте бота через @BotFather
- Получите токен бота

### Instagram
- Используется библиотека instagrapi (неофициальный API)
- Требуется логин и пароль от аккаунта

### Pinterest
- Зарегистрируйтесь как разработчик
- Создайте приложение и получите API-ключ

### YouTube
- Создайте проект в Google Cloud Console
- Включите YouTube Data API v3
- Получите API-ключ

## Запуск воркера и планировщика

Если вы используете локальный запуск, вам также нужно запустить:

- Воркер Celery для обработки задач:
```bash
celery -A app.worker worker --loglevel=info
```

- Планировщик задач:
```bash
python -m app.scheduler
```

## Процесс кросспостинга

CrossPoster автоматически отслеживает новые посты в социальных сетях и репостит их в другие подключенные платформы. Процесс работает следующим образом:

1. **Планировщик** регулярно запускает проверку новых постов в подключенных социальных сетях
2. **Мониторинг** получает последние посты из социальных сетей и сравнивает с уже известными
3. При обнаружении новых постов, **система задач Celery** создает задачи репостинга
4. **Воркер** обрабатывает задачи и публикует посты в другие социальные сети
5. **Статистика** собирает информацию о публикациях и эффективности

Для визуального представления процесса кросспостинга см. файл [CROSSPOSTING_FLOWCHART.md](./CROSSPOSTING_FLOWCHART.md).

## Тестирование

Для запуска тестов:
```bash
python -m pytest
```

## Веб-интерфейс

CrossPoster теперь включает веб-интерфейс для удобного управления аккаунтами социальных сетей:

1. **Управление аккаунтами**: Подключайте и настраивайте аккаунты различных социальных сетей через удобный веб-интерфейс
2. **Безопасное хранение ключей**: API-ключи шифруются и безопасно хранятся в базе данных
3. **Тестовый репост**: Проверяйте работу системы с помощью специальной функции тестового репоста
4. **Мониторинг статуса**: Отслеживайте статус подключения ко всем аккаунтам
5. **Статистика**: Просматривайте сводную статистику по публикациям

## Вклад в проект

1. Сделайте форк репозитория
2. Создайте ветку для новой фичи (`git checkout -b feature/amazing-feature`)
3. Зафиксируйте изменения (`git commit -m 'Add some amazing feature'`)
4. Отправьте изменения в репозиторий (`git push origin feature/amazing-feature`)
5. Создайте Pull Request